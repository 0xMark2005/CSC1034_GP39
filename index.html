<!DOCTYPE html>
<html>
    <head>
        <title>ReignFall</title>

        <!-- CSS stylesheets -->
        <link rel="stylesheet" href="css/theme.css">
        <!-- Change the below with the updated favicon, whoevers edition we are using -->
        <link rel="icon" type="image/x-icon" href="assets/images/reignfall-logo.png">
    </head>
    <body>

        <!-- Terminal One Div -->
        
        <div class="terminal-one"> 
            <!-- Title of the terminal -->   
            <div id="title">
                <h1><img src="assets/images/reignfall-logo.png" alt="Logo for Reignfall" title="Logo for Reignfall"width="60%" ></h1>
            </div>

            <!-- Buttons To allow the user to login or Sign Up -->
            <div class="button-container">
                <button id="login">Login</button>
                <button id="signUp">Sign Up</button>
            </div>

            <!-- Sign up -->
            <div id="signUpForm" style="display: none;">
                <h2>Sign up</h2>
                <p>Please sign up to access the game!</p>

                <label for="username"><b>Username</b></label>
                <input type="text" placeholder="Enter username" name="username" required>

                <label for="psw"><b>Password</b></label>
                <input type="password" placeholder="Enter Password" name="psw" required>

                <label for="psw-repeat"><b>Repeat Password</b></label>
                <input type="password" placeholder="Repeat Password" name="psw-repeat" required>

                <label>
                    <input type="checkbox" checked="checked" name="remember" style="margin-bottom:15px">Remember me
                </label>

                <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a></p>

                <div class="clearfix">
                    <button type="button" class="cancelbtn">Cancel</button>
                    <button type="submit" class="signupbtn">Sign Up</button>
                </div>
            </div>
            <!-- End of Terminal One div -->

            <!-- Login Form -->
            <div id="loginForm" style="display: none;">
                <h2>Login</h2>
                <input type="text" id="username" class="standardtextfield" placeholder="Username" value="Admin" />
                <input type="password" id="password" class="standardtextfield" placeholder="Password" value="Admin!1234" />

                <!-- An element to toggle between password visibility -->
                <div class="checkbox-wrapper-3">
                    <input type="checkbox" id="cbx-3" onclick="changePasswordToClear()"/>
                    <label for="cbx-3" class="toggle">
                        <span></span>
                    </label>
                    <span class="toggle-text">Show Password</span>
                </div>

                <div class="button-container">
                    <button id="submitLogin" style="width: 100%;">Login</button>
                </div>
            </div>
            <!-- End of Login Div -->

            <!-- Text-Based Menu (Appears when Login is clicked) -->

            
            <div id="menu" style="display: none;">

                <div id="inventory" class="inventory-outer-container">
                   <!-- intentionally left blank  - this is no longer hardcoded. see database table (tools) to add/delete VIEW ON SERVER!-->
                </div>
                <div class="terminal-two">
                    <h2>Main Menu</h2>
                    <ol>
                        <li>Start Game</li>
                        <li>Load Game</li>
                        <li>Settings</li>
                        <li>Logout</li>
                    </ol>
                </div>

                <!-- Get Users input From the Menu -->
           
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="text" id="userInput" placeholder="Type here...">
                    </div>
                </div>
            </div>
            <!-- End of Menu div -->

            <!-- User selects to play the game from menu, so menu is hidden and the story introduction begins -->
            <div id="gameBegins" style="display: none;">
                <h1 id="gameBeginsTitle"></h1>
                    <div class="terminal-two">
                    <p id="gameOutputParagraph">

                    </p>
                </div>
                <!-- User should be able to enter text into the game -->
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="text" id="gameUserInput" placeholder="Type here...">
                    </div>
                </div>
            </div>

            <!-- Accessibility Settings page -->
            <div id="userSettings" style="display: none;">
                <div class="terminal-two">
                    <h2>User Settings</h2>
                    <ol>
                        <li>Text Size</li>
                        <li>High Contrast</li>
                        <li>Screen Colour Calibration</li>
                    </ol>
                </div>

                <!-- Get Users input for Settings -->
                <div class="input-container">
                    <div class="input-wrapper">
                        <input type="text" id="userSettingsInput" placeholder="Type here...">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- JS Files -->
        <script src="js/validation.js"></script>
        <script src="js/login.js"></script>
        <script src="js/signUp.js"></script>
        <script src="js/menu.js"></script>
        <script src="js/game.js"></script>
        <script src="js/settings.js"></script>

        <script>
          document.addEventListener('DOMContentLoaded', () => {
    fetch('includes/get_tools.php')
        .then(response => response.json())
        .then(data => {
            const container = document.getElementById('inventory');
            if (!container) return;

            container.innerHTML = "";

            if (!data || data.length === 0) {
                container.textContent = "No tools found in the inventory.";
            } else {
                data.forEach(tool => {
                    const toolDiv = document.createElement('div');
                    toolDiv.classList.add('inventory-item-container');

                    const img = document.createElement('img');
                    img.src = tool.itemImgThumbnail;
                    img.alt = tool.itemName;
                    img.title = tool.itemName;

                    // Create the details div
                    const detailsDiv = document.createElement('div');
                    detailsDiv.classList.add('inventory-item-details');

                    const nameElement = document.createElement('strong');
                    nameElement.textContent = tool.itemName;

                    const descriptionElement = document.createElement('p');
                    descriptionElement.classList.add('inventory-description');
                    descriptionElement.textContent = tool.itemDescription || 'No description available';

                    detailsDiv.appendChild(nameElement);
                    detailsDiv.appendChild(descriptionElement);

                    toolDiv.appendChild(img);
                    toolDiv.appendChild(detailsDiv);
                    container.appendChild(toolDiv);

                    toolDiv.addEventListener('click', () => {
                        document.querySelectorAll('.inventory-item-container').forEach(item => {
                            if (item !== toolDiv) {
                                item.classList.remove('expanded');
                                item.querySelector('.inventory-description').classList.remove('show');
                            }
                        });

                        toolDiv.classList.toggle('expanded');

                        // Delay showing the description (0.5s)
                        setTimeout(() => {
                            if (toolDiv.classList.contains('expanded')) {
                                descriptionElement.classList.add('show');
                            }
                        }, 500);
                    });
                });
            }
        })
        .catch(err => {
            console.error("Error fetching tools:", err);
        });
});

            </script>

    </body>
</html>