<!DOCTYPE html>
<html lang="en">
    <head>
        <!--Set the meta tags-->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--Title-->
        <title>ReignFall Main Menu</title>
        <link rel="icon" type="image/x-icon" href="css/assets/images/logo_favicon.png">

        <!--CSS Import-->
        <link rel="stylesheet" href="css/theme.css">
        <link rel="stylesheet" href="css/terminal.css">
        <link rel="stylesheet" href="css/main_menu.css">
        <link rel="stylesheet" href="css/inventory.css">
        <link rel="stylesheet" href="css/global_menu.css">

        <!-- checking for logged in status-->
        <script type="module">
          import SettingsManager from '/js/settingsManager.js'; 
        
          (async function() {
            const userInput = document.getElementById('user-input');

            // Get settings using the SettingsManager
            const settings = await SettingsManager.getSettings(); 
            const currentTextSize = settings.currentTextSize || "16px"; // Default to 16px
        
            // Apply the text size globally
            document.documentElement.style.setProperty('--base-font-size', currentTextSize);
        
        
            // Handle sound settings if necessary
            const soundEnabled = settings.soundEnabled;
            if (soundEnabled) {
              document.addEventListener("DOMContentLoaded", function () {
                document.querySelectorAll('button').forEach(function(btn) {
                  btn.addEventListener('click', function() {
                    new Audio('css/assets/sounds/button-click.mp3').play();
                  });
                });
              });
            }
          })();
        </script>
        
              
            
    </head>
    <body>
        <!-- Top Bar Navigation -->
      <nav class="topbar">
        <div class="topbar-left">
          <a href="index.html">    
            <img src="css/assets/images/icons/homeIcon.png" alt="Home Icon" class="link-icon">
            Menu
          </a>
       
          <a href="settings.html">    
            <img src="css/assets/images/icons/settingsIcon.png" alt="Settings Icon" class="link-icon">
            Settings
          </a>


        </div>
      
        <div class="topbar-right">
          <div class="user-dropdown">
            <a id="user-button">User ▾</a>
            <div class="dropdown-content" id="user-dropdown">
              <span id="username-label"></span>
              <a href="logout.html">Log Out</a>
            </div>
          </div>
          <button class="hamburger" id="hamburger-btn">☰</button>
        </div>
      </nav>

       <!-- Top Bar Navigation Ends-->
        <!-- Main Container Div -->
        <div id="main-container">

            <!-- Game Title -->
            <div id="title">
                <h1><img src="css/assets/images/reignfall-logo.png" alt="Logo for Reignfall" title="Logo for Reignfall"width="40%" class="picmargin" ></h1>
            </div>

            <div class="menu-grid">
              <div class="menu-item big-tile" id="new-game">
                <img src="css/assets/images/icons/gameIcon2.png" alt="New Game" />
                <div class="tile-label">New Game</div>
              </div>
              <div class="menu-item small-tile" id="load-game">
                <img src="css/assets/images/icons/saveFileIcon.png" alt="Load Game" />
                <div class="tile-label">Load Game</div>
              </div>
              <div class="menu-item small-tile" id="settings-menu">
                <img src="css/assets/images/icons/settingsIcon.png" alt="Settings" />
                <div class="tile-label">Settings</div>
              </div>
              <div class="menu-item small-tile" id="player-stats">
                <img src="css/assets/images/icons/playerstatsIcon.png" alt="Player Stats" />
                <div class="tile-label">Player Stats</div>
              </div>
              <div class="menu-item small-tile" id="leaderboard-menu">
                <img src="css/assets/images/icons/leaderboardIcon.png" alt="Leaderboard" />
                <div class="tile-label">Leaderboard</div>
              </div>
            <!-- Text-Based Menu -->     
            <div id="main-menu">


                <div id="output-terminal">
                  <h2>Main Menu</h2>
                  <ol>
                    <li>New Game</li>
                    <li>Load Game</li>
                    <li>Settings</li>
                    <li>Edit Profile</li>
                    <li>View Player Stats</li>
                    <li>Leaderboard</li>
                    <li>Log Out</li>
                  </ol>
                </div>

                <!-- Get Users input From the Menu -->
           
                <div id="input-terminal">
                    <div class="input-wrapper">
                        <input type="text" id="user-input" placeholder="Type here...">
                    </div>
                </div>
            </div>
          </div>
          <!-- Popup for Load Game Saves -->
          <div id="popup-container" class="popup-container" style="display: none;">
            <div class="popup">
              <span id="popup-close" class="close-btn">&times;</span>
              <div id="popup-content"></div>
            </div>
          </div>
          <script type="module" src="js/menu.js"></script>
          <script type="module" src="js/global_menu.js"></script>
  
    </body>
</html>